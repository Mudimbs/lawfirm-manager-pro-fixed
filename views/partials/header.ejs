<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title><%= title || "LawFirm Manager" %></title>
  <link rel="stylesheet" href="/public/styles.css" />
  <style>
    body{font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; margin:0; background:#f6f7fb;}
    header, footer{background:#0f3d91; color:#fff; padding:12px 18px;}
    nav a{color:#fff; margin-right:12px; text-decoration:none; font-weight:600;}
    .container{max-width:1100px; margin:18px auto; background:#fff; padding:18px; border-radius:12px; box-shadow:0 10px 25px rgba(0,0,0,.05);}
    .btn{display:inline-block; padding:8px 12px; border-radius:8px; border:1px solid #0f3d91; color:#0f3d91; text-decoration:none; font-weight:600;}
    .btn.primary{background:#0f3d91; color:#fff;}
    .btn.danger{border-color:#b00020; color:#b00020;}
    table{width:100%; border-collapse:collapse;}
    th,td{padding:10px 8px; border-bottom:1px solid #eee; text-align:left;}
    .flash{padding:10px 12px; border-radius:8px; margin-bottom:12px;}
    .flash.success{background:#e8f5e9;}
    .flash.error{background:#ffebee;}
    label{display:block; margin-top:10px; font-weight:600;}
    input, select, textarea{width:100%; padding:8px; border:1px solid #ddd; border-radius:8px; margin-top:6px;}
    .row{display:grid; grid-template-columns: 1fr 1fr; gap:12px;}
  </style>
</head>
<body>
  <header>
    <div style="display:flex; align-items:center; justify-content:space-between;">
      <div style="font-size:18px; font-weight:700;">⚖️ LawFirm Manager</div>
      <% if (user) { %>
        <nav>
          <a href="/">Tableau de bord</a>
          <a href="/clients">Clients</a>
          <a href="/dossiers">Dossiers</a>
          <a href="/audiences">Audiences</a>
          <a href="/factures">Factures</a>
          <a href="/documents">Documents</a>
          <a href="/finance">Finance</a>
          <% if (user && user.role === "admin") { %><a href="/utilisateurs">Utilisateurs</a><% } %>
          <form action="/logout" method="post" style="display:inline;">
            <button class="btn" style="background:#fff; color:#0f3d91;">Se déconnecter</button>
          </form>
        </nav>
      <% } %>
    </div>
  </header>
  <div class="container">
    <% if (success && success.length) { %><div class="flash success"><%= success %></div><% } %>
    <% if (error && error.length) { %><div class="flash error"><%= error %></div><% } %>
